<?php
	$Menu = "04";
	$sMenu = "04-1";

	include $_SERVER['DOCUMENT_ROOT'].'/kr/include/header.html'; 
?>

	<div id="container">
		<div id="sub_con">
			<?
				include $_SERVER['DOCUMENT_ROOT'].'/kr/include/sub_banner.html'; 
			?>

			<div class="contents_con">
				
				<div class="onp_sub01_con">
					<div class="contents_con">
						<div class="info01_con go_info01_con">
							<div class="contents_con">
								<div class="title_con">
									<span>
										기타 하부주행 부품
									</span>
								</div>

								<div class="contents_con">
									<div class="text_con">
										<div class="text01_con">
											<span>
												경상남도 진주에서 전하는 믿음직한 하부주행 솔루션 <br class="w_br" />
												코리아크롤러트랙㈜는 중장비용 트랙 링크 전문 제조업체로서, <br class="w_br" />
												전 세계 건설 및 광산 산업의 요구를 충족하는 내구성 뛰어난 <br class="w_br" />
												정밀 부품을 제공하기 위해 최선을 다하고 있습니다. 
											</span>
										</div>

										<div class="text02_con">
											<div class="text01_con">
												<span>
													핵심 제품인 트랙 링크 조립품(TRACK LINK ASSY) 외에도 다음과 같은 하부주행 부품 전반을 공급하고 있습니다:
												</span>
											</div>

											<div class="text02_con">
												<div class="text01_con">
													<ul>
														<li>
															<span>
																트랙 그룹
															</span>
														</li>
														<li>
															<span>
																스프로킷
															</span>
														</li>
														<li>
															<span>
																트랙 슈
															</span>
														</li>
														<li>
															<span>
																아이들러
															</span>
														</li>
														<li>
															<span>
																롤러
															</span>
														</li>
														<li>
															<span>
																수리 키트 등
															</span>
														</li>
													</ul>
												</div>

												<div class="text02_con">
													<span>
														개별 부품도 구매 가능합니다
													</span>
												</div>
											</div>

											<div class="text03_con">
												<span>
													완제품 조립품과 개별 부품 모두 제공하여 효율적인 유지보수와 수리를 지원합니다.
												</span>
											</div>
										</div>
									</div>

									<div class="img_con">
										<img src="/kr/img/onp/onp_sub01_info01_img_con_img.png" alt="컨텐츠 이미지" class="fx w_img" />
										<img src="/kr/img/onp/m_onp_sub01_info01_img_con_img.png" alt="컨텐츠 이미지" class="fx m_img" />
									</div>
								</div>
							</div>

							<div class="bg">
								<img src="/kr/img/onp/onp_sub01_info01_con_bg_img.png" alt="컨텐츠 이미지" class="fx w_img" />
								<img src="/kr/img/onp/m_onp_sub01_info01_con_bg_img.png" alt="모바일 컨텐츠 이미지" class="fx m_img" />
							</div>
						</div>

						<div class="info02_con go_info02_con">
							<div class="contents_con">
								<div class="title_con">
									<div class="text01_con">
										<span>
											기타 부품 사진
										</span>
									</div>

									<div class="text02_con">
										<span>
											트랙 그룹, 트랙 슈, 롤러, 스프로킷, 아이들러
										</span>
									</div>
								</div>
								
								<div class="contents_con">
									<div class="list_con">
										<div class="list_con">
											<ul>
                                                                        <?php
                                                                        $onpImagesAll = $db->query("SELECT * FROM df_site_onp_images ORDER BY prior DESC");
                                                                        $totalImages  = count($onpImagesAll);
                                                                        $totalPages   = ceil($totalImages / 4);
                                                                        $onpImages    = array_slice($onpImagesAll, 0, 4);
                                                                        foreach ($onpImages as $i => $img) { ?>
                                                                        <li>
                                                                        <a href="javascript:onp_sub01_info02_popup(<?php echo $i; ?>);">
                                                                        <div class="img_con" style="background-image:url('/userfiles/images/<?php echo $img['upfile_pc']; ?>');">
                                                                        <img src="/kr/img/onp/onp_sub01_info02_list_img_con_blank_img.png" alt="블랭크 이미지" class="fx" />
                                                                        </div>
                                                                        </a>
                                                                        </li>
                                                                        <?php } ?>
											</ul>
										</div>

                                                                               <div class="number_list_con" data-total-pages="<?php echo $totalPages; ?>">
											<div class="contents_con">
												<div class="btn_con">
													<a href="#">
														<img src="/kr/img/sub/number_list_prev_btn2.svg" alt="번호목록 이전2 버튼" class="fx" />
													</a>

													<a href="#">
														<img src="/kr/img/sub/number_list_prev_btn.svg" alt="번호목록 이전 버튼" class="fx" />
													</a>
												</div>
											
												<div class="list_con">
                                                                               <a href="#" class="list_a">
                                                                               01
                                                                               </a>

                                                                               <a href="#" class="list_a last_page_num">
                                                                               <?php echo sprintf('%02d', $totalPages); ?>
                                                                               </a>

													<div class="bar"></div>
												</div>
											
												<div class="btn_con">
													<a href="#">
														<img src="/kr/img/sub/number_list_next_btn.svg" alt="번호목록 다음 버튼" class="fx" />
													</a>

													<a href="#">
														<img src="/kr/img/sub/number_list_next_btn2.svg" alt="번호목록 다음2 버튼" class="fx" />
													</a>
												</div>
											</div>
										</div>
									</div>

									<div class="popup_con_bg"></div>
									<div class="popup_con">
										<div class="contents_con">
											<div class="close_btn">
												<a href="javascript:onp_sub01_info02_popup();" class="a_btn">
													<span>
														Close
													</span>

													<img src="/kr/img/sub/popup_close_btn_icon.svg" alt="아이콘" class="fx" />
												</a>
											</div>

											<div class="slide_con">
                                                                        <div class="swiper onp_sub01_info02_popup_slide">
                                                                        <div class="swiper-wrapper">
                                                                        <?php foreach ($onpImages as $img) { ?>
                                                                        <div class="swiper-slide onp_sub01_info02_popup_slide_div">
                                                                        <div class="img_con" style="background-image:url('/userfiles/images/<?php echo $img['upfile_pc']; ?>');">
                                                                        <img src="/kr/img/onp/onp_sub01_info02_list_img_con_blank_img.png" alt="블랭크 이미지" class="fx" />
                                                                        </div>
                                                                        </div>
                                                                        <?php } ?>
                                                                        </div>
                                                                        </div>

												<div class="swiper-button-prev slide_btn prev onp_sub01_info02_popup_slide_prev_btn">
													<img src="/kr/img/onp/onp_sub01_info02_popup_slide_prev_btn.svg" alt="슬라이드 이전 버튼" class="fx" />
												</div>

												<div class="swiper-button-next slide_btn next onp_sub01_info02_popup_slide_next_btn">
													<img src="/kr/img/onp/onp_sub01_info02_popup_slide_next_btn.svg" alt="슬라이드 다음 버튼" class="fx" />
												</div>
											</div>

											<div class="thumbnail_slide_con">
                                                                        <div class="swiper onp_sub01_info02_popup_thumbnail_slide">
                                                                        <div class="swiper-wrapper">
                                                                        <?php foreach ($onpImages as $img) { ?>
                                                                        <div class="swiper-slide onp_sub01_info02_popup_thumbnail_slide_div">
                                                                        <div class="img_con" style="background-image:url('/userfiles/images/<?php echo $img['upfile_pc']; ?>');">
                                                                        <img src="/kr/img/onp/onp_sub01_info02_list_img_con_blank_img.png" alt="블랭크 이미지" class="fx" />
                                                                        <div class="over_con"></div>
                                                                        </div>
                                                                        </div>
                                                                        <?php } ?>
                                                                        </div>
                                                                        </div>
											</div>

											<div class="text_con">
												<div class="swiper-pagination main_slide_swiper-pagination"></div>
												
												<div class="bar"></div>

												<span class="total_text"></span>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

			</div>
		</div>
	</div>

	<script type="text/javascript" language="javascript">
		$(document).ready(function(){
			gsap.registerPlugin(ScrollTrigger, CustomEase);
		
			setTimeout(function(){
				// .onp_sub01_con > .contents_con > .info01_con 애니메이션을 기록할 변수
				let tl_onp_sub01_info01 = null;
				
				// .onp_sub01_con > .contents_con > .info01_con 애니메이션
				gsap.to(".onp_sub01_con > .contents_con > .info01_con", {
					scrollTrigger: {
						trigger: ".onp_sub01_con > .contents_con > .info01_con",
						start: "top center",
						end: "bottom center",
						onEnter: () => {
							// 실행 중인 애니메이션이 없으면 애니메이션 생성 및 실행
							if (!tl_onp_sub01_info01) {
								// 타임라인 생성
								tl_onp_sub01_info01 = gsap.timeline();

								// 화면 너비
								if (window.innerWidth > 1024) {
									//
									tl_onp_sub01_info01.to(".onp_sub01_con > .contents_con > .info01_con > .bg", {
										opacity: 1,
										ease: "ease",
										duration: 0.8,
									});

									//
									tl_onp_sub01_info01.to(".onp_sub01_con > .contents_con > .info01_con > .contents_con > .contents_con > .img_con", {
										opacity: 1,
										translateY: 0,
										ease: "ease",
										duration: 0.8,
									}, "-=0.6");

									//
									tl_onp_sub01_info01.to(".onp_sub01_con > .contents_con > .info01_con > .contents_con > .title_con span, .onp_sub01_con > .contents_con > .info01_con > .contents_con > .contents_con > .text_con > .text01_con span, .onp_sub01_con > .contents_con > .info01_con > .contents_con > .contents_con > .text_con > .text02_con > .text01_con span, .onp_sub01_con > .contents_con > .info01_con > .contents_con > .contents_con > .text_con > .text02_con > .text02_con, .onp_sub01_con > .contents_con > .info01_con > .contents_con > .contents_con > .text_con > .text02_con > .text03_con span", {
										opacity: 1,
										translateY: 0,
										ease: "ease",
										duration: 0.8,
										stagger: {
											each: 0.2,
											from: "start",
										},
									}, "-=0.6");
								}else{
									//
									tl_onp_sub01_info01.to(".onp_sub01_con > .contents_con > .info01_con > .contents_con > .title_con span, .onp_sub01_con > .contents_con > .info01_con > .contents_con > .contents_con > .text_con > .text01_con span, .onp_sub01_con > .contents_con > .info01_con > .contents_con > .contents_con > .text_con > .text02_con > .text01_con span, .onp_sub01_con > .contents_con > .info01_con > .contents_con > .contents_con > .text_con > .text02_con > .text02_con, .onp_sub01_con > .contents_con > .info01_con > .contents_con > .contents_con > .text_con > .text02_con > .text03_con span", {
										opacity: 1,
										translateY: 0,
										ease: "ease",
										duration: 0.8,
										stagger: {
											each: 0.2,
											from: "start",
										},
									});

									//
									tl_onp_sub01_info01.to(".onp_sub01_con > .contents_con > .info01_con > .contents_con > .contents_con > .img_con", {
										opacity: 1,
										translateY: 0,
										ease: "ease",
										duration: 0.8,
									}, "-=0.6");

									//
									tl_onp_sub01_info01.to(".onp_sub01_con > .contents_con > .info01_con > .bg", {
										opacity: 1,
										ease: "ease",
										duration: 0.8,
									}, "-=0.6");
								}
							}
						},
						onLeaveBack: () => {
							// 실행 중인 애니메이션 중지 및 초기화
							if (tl_onp_sub01_info01) {
								tl_onp_sub01_info01.kill();
								tl_onp_sub01_info01 = null;
							}
						},
						//markers: true,
					},
				});

				// .onp_sub01_con > .contents_con > .info02_con 애니메이션을 기록할 변수
				let tl_onp_sub01_info02 = null;
				
				// .onp_sub01_con > .contents_con > .info02_con 애니메이션
				gsap.to(".onp_sub01_con > .contents_con > .info02_con", {
					scrollTrigger: {
						trigger: ".onp_sub01_con > .contents_con > .info02_con",
						start: "top center",
						end: "bottom center",
						onEnter: () => {
							// 실행 중인 애니메이션이 없으면 애니메이션 생성 및 실행
							if (!tl_onp_sub01_info02) {
								// 타임라인 생성
								tl_onp_sub01_info02 = gsap.timeline();

								//
								tl_onp_sub01_info02.to(".onp_sub01_con > .contents_con > .info02_con > .contents_con > .title_con, .onp_sub01_con > .contents_con > .info02_con > .contents_con > .contents_con > .list_con > .list_con > ul > li > a > .img_con, .onp_sub01_con > .contents_con > .info02_con > .contents_con > .contents_con > .list_con > .number_list_con", {
									opacity: 1,
									translateY: 0,
									ease: "ease",
									duration: 0.8,
									stagger: {
										each: 0.2,
										from: "start",
									},
								});
							}
						},
						onLeaveBack: () => {
							// 실행 중인 애니메이션 중지 및 초기화
							if (tl_onp_sub01_info02) {
								tl_onp_sub01_info02.kill();
								tl_onp_sub01_info02 = null;
							}
						},
						//markers: true,
					},
				});
			}, 500);

			ScrollTrigger.refresh();
		});
        </script>

        <script type="text/javascript">
                $(function(){
                        var currentPage = 1;
                        var $numCon = $(".onp_sub01_con > .contents_con > .info02_con > .contents_con > .contents_con > .list_con > .number_list_con");
                        var totalPages = parseInt($numCon.data("total-pages"), 10) || 1;

                        function zeroPad(n){
                                return (n < 10 ? "0" : "") + n;
                        }

                        function loadPage(p){
                                if(p < 1) p = 1;
                                if(p > totalPages) p = totalPages;
                                $.getJSON('/controller/onp_images.php', { page: p }, function(res){
                                        if(res.result === 'ok'){
                                                var html = '';
                                                $.each(res.items, function(i, item){
                                                        html += '<li>';
                                                        html += '    <a href="javascript:onp_sub01_info02_popup(' + item.index + ');">';
                                                        html += '        <div class="img_con" style="background-image:url(\'/userfiles/images/' + item.upfile_pc + '\');">';
                                                        html += '            <img src="/kr/img/onp/onp_sub01_info02_list_img_con_blank_img.png" alt="블랭크 이미지" class="fx" />';
                                                        html += '        </div>';
                                                        html += '    </a>';
                                                        html += '</li>';
                                                });
                                                $numCon.siblings('.list_con').find('ul').html(html);
                                                currentPage = p;
                                        }
                                });
                        }

                        $numCon.find('.btn_con').eq(0).find('a').eq(0).on('click', function(e){ e.preventDefault(); loadPage(1); });
                        $numCon.find('.btn_con').eq(0).find('a').eq(1).on('click', function(e){ e.preventDefault(); loadPage(currentPage - 1); });
                        $numCon.find('.btn_con').eq(1).find('a').eq(0).on('click', function(e){ e.preventDefault(); loadPage(currentPage + 1); });
                        $numCon.find('.btn_con').eq(1).find('a').eq(1).on('click', function(e){ e.preventDefault(); loadPage(totalPages); });

                        $numCon.find('.list_con .list_a').eq(0).text(zeroPad(1));
                        $numCon.find('.list_con .last_page_num').text(zeroPad(totalPages));
                });
        </script>

        <script type="text/javascript" language="javascript">
		// info02 팝업 열기/닫기
		function onp_sub01_info02_popup(type){
			if( $(".onp_sub01_con > .contents_con > .info02_con > .contents_con > .contents_con > .popup_con").css("display") == "none" ){
				$(".onp_sub01_con > .contents_con > .info02_con > .contents_con > .contents_con > .popup_con_bg").fadeIn();
				$(".onp_sub01_con > .contents_con > .info02_con > .contents_con > .contents_con > .popup_con").fadeIn();
				
				// 화면 너비
				if (window.innerWidth > 1024) {

				}else{
					$("body").addClass("hidden");
				}

				// info02 팝업 슬라이드 총 장수
				$(".onp_sub01_con > .contents_con > .info02_con > .contents_con > .contents_con > .popup_con > .contents_con > .text_con .total_text").html($(".onp_sub01_info02_popup_slide_div").length);

				// info02 팝업 썸네일 슬라이드
				var onp_sub01_info02_popup_thumbnail_slide = null;

				// info02 팝업 썸네일 슬라이드 파괴
				if (onp_sub01_info02_popup_thumbnail_slide) {
					onp_sub01_info02_popup_thumbnail_slide.destroy();
					onp_sub01_info02_popup_thumbnail_slide = null;
				}
				
				// info02 팝업 썸네일 슬라이드
				onp_sub01_info02_popup_thumbnail_slide = new Swiper ('.onp_sub01_info02_popup_thumbnail_slide', {
					slidesPerView: 6,
					speed: 1500,
					loop: false,
					observer: true,
					observeParents: true,
				//	simulateTouch: false,
					allowTouchMove: false,
					freeMode: true,
					watchSlidesProgress: true,
				});

				// info02 팝업 슬라이드 
				var onp_sub01_info02_popup_slide = null;

				// info02 팝업 슬라이드 파괴
				if (onp_sub01_info02_popup_slide) {
					onp_sub01_info02_popup_slide.destroy();
					onp_sub01_info02_popup_slide = null;
				}
				
				// info02 팝업 슬라이드 
				onp_sub01_info02_popup_slide = new Swiper ('.onp_sub01_info02_popup_slide', {
					slidesPerView: 'auto',
					effect: 'fade',
					speed: 1500,
					loop: false,
					navigation: {
						nextEl: '.onp_sub01_info02_popup_slide_next_btn',
						prevEl: '.onp_sub01_info02_popup_slide_prev_btn',
					},
					pagination: {
						el: ".main_slide_swiper-pagination",
						clickable: true,
						renderBullet: function(index, className) {
							return '<span class="' + className + '">' + (index + 1) + "</span>";
						},
					},
					observer: true,
					observeParents: true,
					thumbs: {
						swiper: onp_sub01_info02_popup_thumbnail_slide,
					},
				});

				// info02 팝업 슬라이드 slideTo
				onp_sub01_info02_popup_slide.slideTo(type, 0);
			}else{
				$(".onp_sub01_con > .contents_con > .info02_con > .contents_con > .contents_con > .popup_con_bg").fadeOut();
				$(".onp_sub01_con > .contents_con > .info02_con > .contents_con > .contents_con > .popup_con").fadeOut();

				// 화면 너비
				if (window.innerWidth > 1024) {

				}else{
					$("body").removeClass("hidden");
				}
			}
		}

		// 초기 화면 크기 저장
		var onp_sub01_initialWidth = window.innerWidth;
		var onp_sub01_isFirstLoad = true;

		// 리사이즈 예외처리
		var onp_sub01_resizeTimer;

		// 화면 리사이징
		$(window).resize(function(){
			// 현재 window 너비
			var currentWidth = window.innerWidth;
			
			// 너비가 변경되지 않은 경우(스크롤, 상태바 동작) 무시
			if(currentWidth === onp_sub01_initialWidth && !onp_sub01_isFirstLoad) {
				return;
			}
			
			clearTimeout(onp_sub01_resizeTimer);
			
			// 화면 너비
			if (window.innerWidth > 1024) {
				// info02 팝업 예외처리
				if( $("body").hasClass("hidden") && $(".onp_sub01_con > .contents_con > .info02_con > .contents_con > .contents_con > .popup_con").css("display") != "none" ){
					$("body").removeClass("hidden");
					$(".onp_sub01_con > .contents_con > .info02_con > .contents_con > .contents_con > .popup_con_bg").hide();
					$(".onp_sub01_con > .contents_con > .info02_con > .contents_con > .contents_con > .popup_con").hide();
				}
			}else{
				// info02 팝업 예외처리
				if( !$("body").hasClass("hidden") && $(".onp_sub01_con > .contents_con > .info02_con > .contents_con > .contents_con > .popup_con").css("display") != "none" ){
					$(".onp_sub01_con > .contents_con > .info02_con > .contents_con > .contents_con > .popup_con_bg").hide();
					$(".onp_sub01_con > .contents_con > .info02_con > .contents_con > .contents_con > .popup_con").hide();
				}
			}

			onp_sub01_resizeTimer = setTimeout(function() {
				// 실제 리사이징이 발생한 경우에만 처리
				if(currentWidth !== onp_sub01_initialWidth || onp_sub01_isFirstLoad) {
					

					// 화면 너비
					if (window.innerWidth > 1024) {
						
					}else{
						
					}

					onp_sub01_initialWidth = currentWidth;
					onp_sub01_isFirstLoad = false;
				}
			}, 500);
		});
	</script>

<?php
	include $_SERVER['DOCUMENT_ROOT'].'/kr/include/footer.html'; 
?>	